<div class="visor-container">
  <header class="visor-header">
    <div class="header-content">
      <h1>GEOCODIFICADOR - VISOR GEOGR√ÅFICO</h1>
    </div>
  </header>

  <div class="visor-main">
    <main class="area-mapa">
      <div id="mapContainer" class="contenedor-mapa">
        <div *ngIf="isLoading" class="estado-carga">
          <div class="spinner"></div>
          <p>Cargando mapa...</p>
          <p *ngIf="!leafletLoaded" class="leaflet-status">Cargando biblioteca de mapas...</p>
        </div>
      </div>
    </main>

    <aside class="panel-derecho">
      <section class="seccion-filtros">
        <div class="encabezado-seccion">
          <h3 class="titulo-seccion">Filtros</h3>
          <div class="acciones-filtros">
            <button class="btn-accion" (click)="seleccionarTodos()">Todos</button>
            <button class="btn-accion" (click)="deseleccionarTodos()">Ninguno</button>
          </div>
        </div>
        <div class="lista-filtros">
          <div class="item-filtro" *ngFor="let filtro of filtros">
            <label class="etiqueta-filtro" [class.activo]="estaFiltroActivo(filtro.nivel)">
              <input type="checkbox"
                     [checked]="estaFiltroActivo(filtro.nivel)"
                     (change)="alternarFiltro(filtro.nivel)"
                     class="checkbox-filtro">
              <span class="indicador-color" [style.backgroundColor]="filtro.color"></span>
              <span class="texto-filtro">
                {{ filtro.nivel }} ({{ filtro.rango }})
                <span *ngIf="filtro.cantidad > 0" class="contador-detalle">
                  : <strong>{{ filtro.cantidad }}</strong>
                  <span *ngIf="filtro.porcentaje > 0" class="porcentaje-filtro">
                    ({{ filtro.porcentaje }}%)
                  </span>
                </span>
              </span>
            </label>
          </div>
        </div>
      </section>
    </aside>
  </div>
</div>
